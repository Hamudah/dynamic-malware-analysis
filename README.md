# Automatisierung von Dynamischer Malware erkennung

## A fully functional setup, to analyze malware inside of a Sandbox created via **VBoxManage CLI** and the **Virtualbox API** 

* First create a Windows and an Ubuntu virtuell machine via a VBoxManage Script
* Customize and set-up virtual machines for malware analysis (Download and set-up FTP, SSH, etc.)
* Set-up connection between VMs
* Loop Script with Malware/Goodware on the Windows Machine and extract Data via the Intel-Pin Tool
* Extract Data from the Ubuntu Machine

## Network Topology
![Network Diagramm](https://github.com/Hamudah/dynamic-malware-analysis/blob/main/Graphs/Network.png?raw=true)

## Requirements
To run the project locally on your PC, the following requirments are necessary:
* `Orcale VirtuelBox 7.0` [Link](https://www.virtualbox.org/wiki/Downloads) or newer
* Download the prepared ISO files [Link](https://o365adessogroup-my.sharepoint.com/:f:/g/personal/muhammed_adel_adesso_de/Ei8tYkVjHdBAs77yBDSv45YBCA18SmWu19hOj_tAwPspQw?e=eylSeM), or use your own iso files, which are supported to do an unattended installation. You can check if your ISO file supports this with `vboxmanage unattended detect --iso=/path/to/iso/file.iso`. Otherwise you could create your own Iso files, by using the config files in ` config_files/ `. For Windows the **Windows SDK** is needed and for Ubuntu **WSL**

## Installation
First download the repository in any directory on your Windows System

`git clone https://github.com/Hamudah/dynamic-malware-analysis.git`

**WARNING** Before you start with the next step, make sure that your system has enough resources, which are distributed to the VMs in the script. Change the script so that the system settings like, processor, Ram, etc fit all on your system. Also change the path of the VBoxManage.exe, if you decide to install it somewhere else. Also a key is needed for the windows installation, if a full version is requiered. 

After you downloaded the repository execute the complete_setup.bat by either double clicking on it or over the cmd. For that go into the main directory `dynamic-malware-analysis/` and execute the complete_setup.bat. 

`.\Scripts\batch\complete_setup.bat` 

After that follow the instructions shown on the machines. If you didnt change any other part of the script, the User for both machines, should have `hamud` as username and password. If you want to change that, then change the username and password in line `81` and `82` in the `complete_setup.bat`. It may be in some cases that you even need to change the config file of the iso, and create a new iso, if the new name doesnt work. 

The next step would be to change the network settings of both VMs to "NAT" or any other network setting, where they have an active Internet connection. Clone the repository onto both machines via  `git clone https://github.com/Hamudah/dynamic-malware-analysis.git`




