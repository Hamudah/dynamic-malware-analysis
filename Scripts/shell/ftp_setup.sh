#!/bin/bash

#Update the os
sudo apt update && sudo apt upgrade

#Install FTP-Server (VSFTPD)
sudo apt install vsftpd

#Check vsftpd
systemctl status vsftpd --no-pager -l

#Add a user for FTP to use the FTP Server. Using is created via another script. 
sudo adduser ftpuser

#Directory where the FTP server saves data
sudo mkdir /home/ftpuser/ftp
sudo chown nobody:nogroup /home/ftpuser/ftp
sudo chmod a-w /home/ftpuser/ftp
sudo mkdir /home/ftpuser/ftp/upload

#Give ownership to the user created before
sudo chown ftpuser:ftpuser /home/ftpuser/ftp/upload

#Small Demo file to test if everything worked
echo "My own FTP Server" | sudo tee /home/ftpuser/ftp/upload/demo.txt

#Create userlist
echo "ftpuser" | sudo tee -a /etc/vsftpd.userlist
sudo ls -la /home/ftpuser/ftp